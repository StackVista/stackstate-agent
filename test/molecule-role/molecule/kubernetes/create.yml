---
- name: Create
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - include_role:
        name: ../common/create
      vars:
        security_group_name: molecule_kubernetes
        security_group_description: Agent v2 Molecule testing running on kubernetes
        security_group_rules:
          - proto: tcp
            from_port: 7077  # StackState Receiver API port
            to_port: 7077
            cidr_ip: '0.0.0.0/0'
          - proto: tcp
            from_port: 443  # HTTPS Port
            to_port: 443
            cidr_ip: '0.0.0.0/0'
          - proto: tcp
            from_port: 8080
            to_port: 8080
            cidr_ip: '0.0.0.0/0'
